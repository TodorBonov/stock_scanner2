# Pipeline V2: Comparison (24 Feb vs 23 Feb)

## Summary stats

| Metric | 23 Feb (previous) | 24 Feb (latest) |
|--------|--------------------|------------------|
| **Report file** | sepa_scan_user_report_20260223_232224.txt | sepa_scan_user_report_20260224_180752.txt |
| Universe | 1710 | 1710 |
| **Eligible Stage 2** | 278 | **282** |
| **A+/A candidates** | 70 | **80** |
| B candidates | 19 | 84 |
| Average RS %ile (eligible) | 62.0 | 70.0 |

---

## Why KEYS is in the report now (and wasn’t yesterday)

**Yesterday (23 Feb):** KEYS does **not** appear anywhere in the ranked table or in the report. So KEYS was **not** among the top 80 eligible names (and with a score like 94.7 it would have been in the top 80 if it had been eligible). So on 23 Feb, KEYS was almost certainly **REJECT** (not eligible).

**Today (24 Feb):** KEYS is **rank 4**, **A+**, composite **94.7**, cup base, 18.1% deep, RS %ile 91.0.

### Cause: multi-window base identification (weak-spot fix #4)

Previously the scanner used a **single** lookback window (last 60 days) to find a base. For KEYS, that single window either:

- did **not** produce a valid base (so `has_valid_base` failed → REJECT), or  
- produced a base with **prior run &lt; 25%** (so base quality failed; with the old logic that could still leave the stock eligible but with base_score 0 and a lower composite).

The **new logic** (`_identify_base_best`) tries **several** lookback windows (20, 25, 30, …, 60 days) and keeps the base that has the **highest prior run**. For KEYS, one of these windows yields a valid cup base with a strong enough prior run, so:

1. KEYS passes eligibility (valid base + prior run ≥ 25% when the gate is on).  
2. It gets a high composite (94.7) and grade A+.

So **KEYS was not “missed” by the rules yesterday** – with the old, single-window base logic it did not get a valid setup. With multi-window base selection, the same data now produces a valid base and KEYS correctly appears as A+.

---

## Other differences (new rules)

The 24 Feb run uses the updated V2 logic:

1. **Prior run as eligibility gate** – Stocks with prior run &lt; 25% are REJECT (fewer eligible, but stricter).
2. **Min RS percentile for A+/A** – A+ requires RS %ile ≥ 80, A requires ≥ 70 (some names downgraded from A+ to A or A to B).
3. **Base length in composite** – Bonus for 5–8 week bases, penalty for &lt;4 weeks.
4. **Multi-window base identification** – Base chosen to maximize prior run (e.g. KEYS now gets a valid base).
5. **Volume score** – Weak volume contraction in the base can reduce the volume component even when “passed”.

So:

- **More eligible (278 → 282)** and **more A+/A (70 → 80)** mainly because **multi-window base** brings in names like KEYS that were previously REJECT for “no valid base”.
- **Prior-run gate** and **RS caps** remove or downgrade some names; the net effect on this run is still more A+/A because of the base-identification change.

---

## Tickers in top 10

| Rank | 23 Feb | 24 Feb |
|------|--------|--------|
| 1 | NEOG (A+ 96.9) | NEOG (A+ 96.9) |
| 2 | FOLD (A+ 95.6) | FOLD (A+ 95.6) |
| 3 | TTC (A+ 95.4) | TTC (A+ 95.4) |
| 4 | GEV (A+ 95.3) | **KEYS (A+ 94.7)** ← new |
| 5 | PLAB (A+ 92.1) | MATX (A+ 93.1) |
| 6 | JNJ (A+ 89.6) | TPR (A+ 92.4) |
| 7 | ALEX (A+ 88.0) | TEVA (A+ 91.3) |
| 8 | BNP.PA (A+ 87.8) | GEV (A+ 90.8) |
| 9 | BMY (A+ 87.5) | CLB (A+ 90.2) |
| 10 | GVA (A+ 86.9) | PTEN (A+ 88.5) |

KEYS is the main newcomer in the top 10; several other names (e.g. MATX, TPR, TEVA, CLB, PTEN, MRK) appear in the 24 Feb top 10 due to the new base logic and/or reordering from the other rule changes.
